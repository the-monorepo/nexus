{"version":3,"sources":["../src/index.ts"],"names":["plugin","chai","util","AssertionPrototype","Assertion","prototype","originalAssert","assert","recordAssert","params","call","err","stackFrames","StackTrace","getSync","AssertionError","assertionType","GENERIC","actual","expected","stack","message"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AACA,MAAMA,MAAM,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AAC7B,QAAMC,kBAAkB,GAAGF,IAAI,CAACG,SAAL,CAAeC,SAA1C;AACA,QAAMC,cAAc,GAAGH,kBAAkB,CAACI,MAA1C;;AACAJ,EAAAA,kBAAkB,CAACI,MAAnB,GAA4B,SAASC,YAAT,CAAsB,GAAGC,MAAzB,EAAiC;AAC3D,QAAI;AACF,aAAOH,cAAc,CAACI,IAAf,CAAoB,IAApB,EAA0B,GAAGD,MAA7B,CAAP;AACD,KAFD,CAEE,OAAOE,GAAP,EAAY;AACZ,YAAMC,WAAW,GAAGC,sBAAWC,OAAX,EAApB;;AACA,YAAM,IAAIC,mCAAJ,CAAmB;AACvBC,QAAAA,aAAa,EAAEZ,iBAAUa,OADF;AAEvBC,QAAAA,MAAM,EAAEP,GAAG,CAACO,MAFW;AAGvBC,QAAAA,QAAQ,EAAER,GAAG,CAACQ,QAHS;AAIvBP,QAAAA,WAJuB;AAKvBQ,QAAAA,KAAK,EAAET,GAAG,CAACS,KALY;AAMvBC,QAAAA,OAAO,EAAEV,GAAG,CAACU;AANU,OAAnB,CAAN;AAQD;AACF,GAdD;AAeD,CAlBD;;eAmBerB,M","sourcesContent":["import { AssertionError } from '@fault/mocha-assertion-error';\r\nimport StackTrace from 'stacktrace-js';\r\nimport { Assertion } from '@fault/types';\r\nconst plugin = (chai, util) => {\r\n  const AssertionPrototype = chai.Assertion.prototype;\r\n  const originalAssert = AssertionPrototype.assert;\r\n  AssertionPrototype.assert = function recordAssert(...params) {\r\n    try {\r\n      return originalAssert.call(this, ...params);\r\n    } catch (err) {\r\n      const stackFrames = StackTrace.getSync();\r\n      throw new AssertionError({\r\n        assertionType: Assertion.GENERIC,\r\n        actual: err.actual,\r\n        expected: err.expected,\r\n        stackFrames,\r\n        stack: err.stack,\r\n        message: err.message,\r\n      });\r\n    }\r\n  };\r\n};\r\nexport default plugin;\r\n"],"file":"index.js"}