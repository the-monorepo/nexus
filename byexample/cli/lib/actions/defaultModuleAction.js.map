{"version":3,"sources":["../src/actions/defaultModuleAction.ts"],"names":["defaultModuleAction","moduleName","result","console","log","chalk","cyan","name","stdin","process","openStdin","on","input","output","undefined","module","fromInput","fromTypes","inputJson","JSON","parse","typeInfo","Error","stdout","write","stringify"],"mappings":";;;;;;;AAAA;;AAEA;;AAEA;;;;AAEO,SAASA,mBAAT,CAA6BC,UAA7B,EAAiD;AACtD,QAAMC,MAAM,GAAG,4BAAWD,UAAX,CAAf;AAEAE,EAAAA,OAAO,CAACC,GAAR,CAAa,iBAAgBC,eAAMC,IAAN,CAAWJ,MAAM,CAACK,IAAlB,CAAwB,GAArD;AAEA,QAAMC,KAAK,GAAGC,OAAO,CAACC,SAAR,EAAd;AACAF,EAAAA,KAAK,CAACG,EAAN,CAAS,MAAT,EAAiBC,KAAK,IAAI;AACxB,QAAIC,MAAM,GAAGC,SAAb;;AACA,QAAIZ,MAAM,CAACa,MAAP,CAAcC,SAAlB,EAA6B;AAC3BH,MAAAA,MAAM,GAAGX,MAAM,CAACa,MAAP,CAAcC,SAAd,CAAwBJ,KAAxB,CAAT;AACD,KAFD,MAEO,IAAIV,MAAM,CAACa,MAAP,CAAcE,SAAlB,EAA6B;AAClC,YAAMC,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWR,KAAX,CAAlB;AACA,YAAMS,QAAQ,GAAG,4BAAgBH,SAAhB,CAAjB;AACAL,MAAAA,MAAM,GAAGX,MAAM,CAACa,MAAP,CAAcE,SAAd,CAAwBI,QAAxB,CAAT;AACD,KAJM,MAIA;AACL,YAAM,IAAIC,KAAJ,CAAW,GAAEpB,MAAM,CAACK,IAAK,6CAAzB,CAAN;AACD;;AACDE,IAAAA,OAAO,CAACc,MAAR,CAAeC,KAAf,CAAqBL,IAAI,CAACM,SAAL,CAAeZ,MAAf,EAAuBC,SAAvB,EAAkC,CAAlC,CAArB;AACD,GAZD;AAaD","sourcesContent":["import chalk from 'chalk';\n\nimport { extractTypeInfo } from '@byexample/types';\n\nimport { findModule } from '../findModule';\n\nexport function defaultModuleAction(moduleName: string) {\n  const result = findModule(moduleName);\n\n  console.log(`Using module '${chalk.cyan(result.name)}'`);\n\n  const stdin = process.openStdin();\n  stdin.on('data', input => {\n    let output = undefined;\n    if (result.module.fromInput) {\n      output = result.module.fromInput(input);\n    } else if (result.module.fromTypes) {\n      const inputJson = JSON.parse(input);\n      const typeInfo = extractTypeInfo(inputJson);\n      output = result.module.fromTypes(typeInfo);\n    } else {\n      throw new Error(`${result.name} does not provide fromTypes or fromExamples`);\n    }\n    process.stdout.write(JSON.stringify(output, undefined, 2));\n  });\n}\n"],"file":"defaultModuleAction.js"}